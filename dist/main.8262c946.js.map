{"version":3,"sources":["main.js"],"names":["$siteList","$","$lastLi","find","dataUrl","localStorage","getItem","JSON","parse","hashMap","url","name","simplify","replace","findIcon","render","remove","forEach","item","index","$li","insertBefore","$close","tigger","timeOutEvent","longClick","deleteLi","e","stopPropagation","splice","on","window","open","hover","setTimeout","show","clearTimeout","hide","touchstart","touchmove","preventDefault","touchend","prompt","indexOf","trim","push","onbeforeunload","console","log","string","stringify","setItem"],"mappings":"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","file":"main.8262c946.js","sourceRoot":"..\\src","sourcesContent":["const $siteList = $('.siteList')\r\nconst $lastLi = $siteList.find('li.lastLi')\r\nlet dataUrl = localStorage.getItem('dataUrl')\r\ndataUrl = JSON.parse(dataUrl)\r\nconst hashMap = dataUrl || [{\r\n  url: 'https://github.com/',\r\n  name: 'GitHub'\r\n},\r\n  {\r\n    url: 'https://nodejs.org/en/',\r\n    name: 'Node'\r\n\r\n  },\r\n  {\r\n    url: 'https://react.docschina.org/',\r\n    name: 'React'\r\n  },\r\n  {\r\n    url: 'https://cn.vuejs.org/',\r\n    name: 'Vue'\r\n  },\r\n  {\r\n    url: 'https://www.zhihu.com/',\r\n    name: '知乎'\r\n  },\r\n  {\r\n    url: 'https://www.bilibili.com/',\r\n    name: '哔哩哔哩'\r\n  }\r\n]\r\nconst simplify = (url) => {\r\n  return url.replace('http://', '')\r\n    .replace('https://', '')\r\n    .replace('www.', '')\r\n    .replace(/\\/.*/, '') // 删除 / 后边的内容\r\n}\r\nconst findIcon = (url) => {\r\n  return \"https://www.google.com/s2/favicons?domain=\" + url + \"\";\r\n};\r\n\r\n\r\nconst render = () => {\r\n  $siteList.find('li:not(.lastLi)').remove()\r\n  hashMap.forEach((item, index) => {\r\n    const $li = $(`\r\n    <li>\r\n     <div class=\"site\">\r\n       <div class=\"logo\">\r\n          <img src=\" ${findIcon(item.url)}\" alt=\"\"> \r\n       </div>\r\n       <div class=\"close\">\r\n           <svg class=\"icon\">\r\n               <use xlink:href=\"#icon-close\"></use>\r\n            </svg>\r\n        </div>\r\n       <span class=\"siteName\">${item.name}</span></span>\r\n     </div> \r\n   </li>\r\n    `).insertBefore($lastLi)\r\n    // console.log(simplify(item.url)[0])\r\n    const $close = $li.find('.close')\r\n    // 定义PC端定时器\r\n    let tigger = null\r\n    // 定义移动端定时器\r\n    let timeOutEvent = null\r\n    // 定义长按 ， 用来判断是否为长按事件\r\n    // 不定义会出现BUG：无论点击或者长按，都会执行touched内的方法，即长按点击都会去跳转页面。\r\n    let longClick = null\r\n    // 删除站点\r\n    let deleteLi = function (e) {\r\n      e.stopPropagation()\r\n      hashMap.splice(index, 1)\r\n      render()\r\n    }\r\n    $li.on('click', () => {\r\n      window.open(item.url)\r\n    })\r\n\r\n    // PC端 显示隐藏删除按钮\r\n    $li.on('click', '.close', deleteLi)\r\n    $li.hover(() => {\r\n      tigger = setTimeout(() => {\r\n        $close.show(500)\r\n      }, 300)\r\n    }, () => {\r\n      clearTimeout(tigger)\r\n      $close.hide(300)\r\n    })\r\n\r\n    // 移动端删除操作\r\n    $li.on({\r\n      // 手指开始触摸时，设置定时器。\r\n      touchstart: function (e) {\r\n        longClick = 0\r\n        timeOutEvent = setTimeout(() => {\r\n          $close.show(500)\r\n          $li.on('click', '.close', deleteLi)\r\n          longClick = 1\r\n        }, 500)\r\n      },\r\n      // 如果手指滑动只是说明用户不想长按只想滑动。 所以要取消定时器并还原。\r\n      // 如果不还原，返回的定时器的值是不同的。\r\n      touchmove: function (e) {\r\n        clearTimeout(timeOutEvent)\r\n        timeOutEvent = 0\r\n        e.preventDefault()\r\n      },\r\n      // 如果长按没有超过500ms ，手指离开就取消定时器，执行点击事件。\r\n      touchend: function (e) {\r\n        clearTimeout(timeOutEvent)\r\n        if (timeOutEvent !== 0 && longClick === 0) {\r\n          $li.on('click', '.close', deleteLi)\r\n        }\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nrender()\r\n\r\n\r\n$('.addButton')\r\n  .on('click', () => {\r\n    let url = window.prompt('请添加你想要的网址')\r\n    let name = window.prompt('请输入添加网址的名字')\r\n    if (url.indexOf('http') !== 0) {\r\n      url = 'https://' + url.trim()\r\n    }\r\n    // console.log(url);\r\n    hashMap.push({\r\n      url: url,\r\n      name: name\r\n    })\r\n    render()\r\n  })\r\n\r\n\r\nwindow.onbeforeunload = () => {\r\n  console.log('页面离开了');\r\n  // 因为localStorage只能存字符串\r\n\r\n  const string = JSON.stringify(hashMap)\r\n  localStorage.setItem('dataUrl', string)\r\n}"]}